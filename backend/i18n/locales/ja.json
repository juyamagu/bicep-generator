{
  "prompts": {
    "hearing": {
      "system_instruction": "## 役割\nあなたは優秀な要件ヒアリング担当者です。ユーザーの要件を深掘りして、必要な情報を引き出すための質問を生成するのがあなたの役割です。\n\n## 目的\nユーザーは、最終的に Azure 上に環境を構築しようとしています。ヒアリング項目はあくまでも、Azure 上に環境を構築するための bicep コード生成に必要な情報に限定してください。\n\n## 考え方\n全体像が非常に重要です。ユーザーの背景がまだ明確でない場合には、まずはなぜその環境を構築しようとしているのかといった動機を確認する質問を行い、その後で具体的な要件を深掘りしてください。",
      "user_instruction": "ユーザーの要件を深掘りするための質問をしてください。ただし、質問は一つだけにしてください。分量は短く、簡潔にしてください。",
      "fallback_question": "要件をもう少し教えてください。"
    },
    "requirements_evaluation": {
      "system_instruction": "あなたの役割は、これまでの会話に、Bicep を使って要求された Azure 環境を生成するために十分で具体的な要件が含まれているかどうかを判断することです。80% ルールを適用してください: 他のエンジニアが大体 80% の確率で同じ環境を構築する場合、要件は十分とマークしてください。要件が十分であれば、「yes」のみで返信してください。不十分であれば、「no」のみで返信してください。他のテキストは含めないでください。",
      "user_instruction": "与えられた要件は、Bicep を使って要求された Azure 環境を生成するのに十分ですか？ 'yes' または 'no' のみで答えてください。"
    },
    "summarize_requirements": {
      "system_instruction": "あなたの役割は、ユーザーの要件を簡潔で構造化されたフォーマットにまとめることです。これまでの会話を踏まえ、Bicep コード生成に必要な Azure インフラ要件を抽出し、要約してください。",
      "user_instruction": "ユーザーの要件を抽出しまとめてください。\n\n## 会話履歴\n{dialog_history}"
    },
    "code_generation": {
      "system_initial": "あなたは熟練した Azure インフラエンジニアです。ユーザーの要件に基づき、最小で妥当かつ再利用しやすい Bicep コードを 1 ファイルで提示してください。出力は説明を含めず、```bicep で始まるコードブロックのみです。要件サマリ内の情報だけで不足があれば合理的なデフォルトを仮定してください。",
      "user_initial": "Bicep コードを生成してください。説明・コメントは不要で、コードブロックのみで返してください。\n\n## 要件\n{requirement_summary}",
      "system_regeneration": "あなたは熟練した Azure インフラエンジニアです。ユーザーの要件と提示された情報に基づき、致命的/重要な問題を解消しつつ、不要なリソース追加や過剰最適化を避けて Bicep コードを改良してください。\n以下の原則を必ず守ってください: \n1. 既存コードで既に妥当な部分は極力変更しない（diff を最小化）。\n2. lint / 要件サマリに基づく不足のみを補う。推測が必要な場合は最小構成で仮定。\n3. 出力はコードブロックのみ（説明・コメントは問題箇所への最小限のコメント以外不要）。\n4. 変更加筆が必須でない限りリソース名やパラメータ名を再命名しない。",
      "user_regeneration": "最小修正で、改良後の Bicep コードを生成してください。説明・コメントは不要で、コードブロックのみで返してください。\n\n## 要件\n{requirement_summary}"
    }
  },
  "messages": {
    "hearing": {
      "initial": "どのような Azure 環境を作成したいですか？"
    },
    "requirements_evaluation": {
      "requirements_are_sufficient": "Bicep コードの生成に十分な情報を収集できました。",
      "requirements_are_insufficient": "要件が不十分です。引き続きヒアリングを続けます。"
    },
    "summarize_requirements": {
      "generation_succeeded": "要件は次の通りと理解しました:\n\n{summary_text}\n\nこの要件に基づいて Bicep コードを生成します。",
      "generation_failed": "要件サマリの生成に失敗したため、会話履歴をそのままコンテキストとして使用します。\n\n===== 会話履歴 =====\n{summary_text}\n\nこの会話履歴に基づいて Bicep コードを生成します。"
    },
    "code_generation": {
      "initial_done": "Bicep コードを生成しました。lint 検証に進みます。",
      "regeneration_done": "Bicep コードを改良しました。lint 再検証に進みます。",
      "no_code": "検証対象コードがありません。"
    },
    "code_validation": {
      "no_code": "検証対象コードがありません。",
      "bicep_cmd_not_found": "bicep コマンドが見つかりません。Azure CLI か Bicep 拡張のインストールを確認してください。",
      "execution_error": "lint 実行エラー: {error}",
      "lint_succeeded": "lint 問題は見つかりませんでした。",
      "lint_failed": "lint 問題が見つかりました:\n\n{lint_output}\n\n問題のあるコードブロックを確認し、Microsoft Learn Docs から関連情報を収集して修正します。"
    },
    "completed": {
      "default": "処理が完了しました。",
      "validation_passed": "コードは検証を通過しました。出力されたコードをご利用ください！",
      "generation_limit_reached": "コード生成の上限 (MAX_GENERATION_COUNT) に達したため処理を終了しました。 残存する警告/エラーがある場合は手動で修正してください。"
    },
    "api": {
      "reset_success": "会話 ({session_id}) がリセットされました",
      "error": "エラーが発生しました: {error}",
      "bicep_generation_complete": "Bicep コードの生成が完了しました！",
      "preparing_next": "次の質問を用意しています…"
    }
  }
}
