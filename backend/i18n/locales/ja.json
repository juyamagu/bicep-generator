{
  "prompts": {
    "hearing": {
      "system_role": "## 役割\nあなたは優秀な要件ヒアリング担当者です。ユーザーの要件を深掘りして、必要な情報を引き出すための質問を生成するのがあなたの役割です。\n\n## 目的\nユーザーは、最終的に Azure 上に環境を構築しようとしています。ヒアリング項目はあくまでも、Azure 上に環境を構築するための bicep コード生成に必要な情報に限定してください。\n\n## 考え方\nまだ背景が明確になっていない場合には、まずは背景を明確にするための質問をしてください。",
      "user_instruction": "ユーザーの要件を深掘りするための質問をしてください。ただし、質問は一つだけにしてください。分量は短く、簡潔にしてください。",
      "fallback_question": "要件をもう少し教えてください。"
    },
    "requirements_evaluation": {
      "system_instruction": "あなたの役割は、これまでの会話に、Bicep を使って要求された Azure 環境を生成するために十分で具体的な要件が含まれているかどうかを判断することです。80% ルールを適用してください: 他のエンジニアが大体 80% の確率で同じ環境を構築する場合、要件は十分とマークしてください。要件が十分であれば、「yes」のみで返信してください。不十分であれば、「no」のみで返信してください。他のテキストは含めないでください。",
      "user_instruction": "与えられた要件は、Bicep を使って要求された Azure 環境を生成するのに十分ですか？'yes' または 'no' のみで答えてください。"
    },
    "code_generation": {
      "system_initial": "あなたは熟練した Azure インフラエンジニアです。以下の『要件サマリ』と（存在すれば）『直近の lint 結果』のみを根拠に、最小で妥当かつ再利用しやすい Bicep コードを 1 ファイル分だけ提示してください。出力は説明を含めず、```bicep で始まるコードブロックのみです。以前の会話内容は参照できない前提で、要件サマリ内の情報だけで不足があれば合理的なデフォルトを仮定してください。",
      "system_regeneration": "あなたは熟練した Azure インフラエンジニアです。これから提示する『既存コード』と『lint 結果』を精査し、致命的/重要な問題を解消しつつ、不要なリソース追加や過剰最適化を避けて Bicep コードを改良してください。\n次の原則を必ず守ってください:\n1. 既存コードで既に妥当な部分は極力変更しない（diff を最小化）。\n2. lint / 要件サマリに基づく不足のみを補う。推測が必要な場合は最小構成で仮定。\n3. 出力はコードブロックのみ（説明・コメントは問題箇所への最小限のコメント以外不要）。\n4. 変更加筆が必須でない限りリソース名やパラメータ名を再命名しない。",
      "user_initial": "## 指示\n上記を踏まえて Bicep コードを初回生成してください。説明・コメントは最小限（無くても良い）。コードブロックのみで返してください。",
      "user_regeneration": "## 指示\n上記を踏まえて最小修正で改良後の完全な Bicep コード全体を再掲してください。コードブロックのみで返してください。"
    },
    "summarize_requirements": {
      "system_instruction": "あなたは Azure 向けインフラ要件の要約アシスタントです。これまでのヒアリング会話ログから、Bicep コード生成に必要な要件だけを抽出し、以下のセクション構成で簡潔にまとめてください。\n\n出力フォーマット:\nPurpose: ...\nResources: 箇条書き (種類 / 個数 / SKU / 目的)\nNetworking: VNet, Subnet, DNS, Public IP, NSG, Endpoint など\nSecurity: RBAC, KeyVault, Secrets, Encryption, NetworkRules など\nScaling & Availability: スケール要件 / 可用性ゾーン / SLA 想定\nConstraints: 地域, ネーミング規則, コスト制約, タグ方針\nOther: 追加の注意点（無ければ 'None'）\n\n禁止事項: コード出力や余計な説明。",
      "user_instruction": "以下がヒアリング会話ログです。要件を抽出し指示フォーマットでまとめてください。\n\n{raw_dialogue}"
    }
  },
  "messages": {
    "hearing": {
      "initial": "どのような Azure 環境を作成したいですか？"
    },
    "requirements_evaluation": {
      "requirements_are_sufficient": "Bicep コードの生成に十分な要件をお聞きすることができました！",
      "requirements_are_insufficient": "要件が不十分です。引き続きヒアリングを続けます。"
    },
    "code_generation": {
      "initial_done": "Bicepコードを生成しました。lint 検証に進みます。",
      "regeneration_done": "Bicepコードを改良しました。lint 再検証に進みます。",
      "no_code": "検証対象コードがありません。"
    },
    "summarize_requirements": {
      "display_message": "要件を集約しました。コード生成へ進みます。\n\n===== 要件サマリ =====\n{summary_text}",
      "generation_failed": "(要約生成に失敗しました)"
    },
    "code_validation": {
      "lint_result": "lint 結果:\n==========\n{lint_output_preview}\n",
      "bicep_not_found": "bicep コマンドが見つかりません。Azure CLI や Bicep 拡張のインストールを確認してください。",
      "timeout": "az bicep lint がタイムアウトしました。",
      "execution_error": "lint 実行エラー: {error}"
    },
    "finalize_validation": {
      "passed": "Bicep コードは検証を通過しました。出力されたコードをご利用ください！",
      "max_regen_reached": "自動再生成の上限 (MAX_REGEN_CALLS) に達したため処理を終了しました。 残存する警告/エラーがある場合は手動で修正してください。",
      "failed": "検証をパスしていませんが、処理を終了します。適宜、手動で修正してご利用ください。"
    },
    "api": {
      "reset_success": "会話({session_id})がリセットされました",
      "error": "エラーが発生しました: {error}",
      "bicep_generation_complete": "Bicepコードの生成が完了しました！",
      "preparing_next": "次の質問を用意しています…"
    }
  }
}
